@page "/available-courses"
@attribute [Authorize]
@layout MainLayout
@using CourseEnrollmentApp.Client.Components
<PageHeading Text="Available Courses" />

<SearchBar @bind-Value="_search" Placeholder="Search courses..." />

<div class="container-fluid mt-4">

    <div class="row g-3">
        @foreach (var c in _courses.Where(MatchesSearch))
        {
            <div class="col-12 col-sm-6 col-lg-4">

                <CourseCard Title="@c.Title"
                            Thumbnail="@c.Thumbnail"
                            Category="@c.Category"

                            ShowPrimaryAction="true"
                            PrimaryText="Add Course"
                            OnPrimary="() => AddCourse(c)"

                            ShowSecondaryAction="false"
                            ShowProgress="false" />
            </div>
        }
    </div>

</div>

@code {
    private string _search = "";

    private bool MatchesSearch(Course c) =>
        string.IsNullOrWhiteSpace(_search)
        || c.Title.Contains(_search, StringComparison.OrdinalIgnoreCase)
        || c.Category.Contains(_search, StringComparison.OrdinalIgnoreCase);

    // UI-only placeholder
    private void AddCourse(Course c)
    {
        Console.WriteLine($"Course added: {c.Title}");
    }

    public class Course
    {
        public int Id { get; set; }
        public string Title { get; set; } = "";
        public string Thumbnail { get; set; } = "";
        public string Category { get; set; } = "";
    }

    private List<Course> _courses = new()
    {
        new Course { Id=1, Title="Mastering C#", Thumbnail="https://images.unsplash.com/photo-1523289333742-be1143f6b766?q=80&w=600", Category="Programming" },
        new Course { Id=2, Title="UI/UX Essentials", Thumbnail="https://images.unsplash.com/photo-1559028012-481c04fa702d?q=80&w=600", Category="Design" },
        new Course { Id=3, Title="JavaScript 101", Thumbnail="https://images.unsplash.com/photo-1531482615713-2afd69097998?q=80&w=600", Category="Frontend" },
        new Course { Id=4, Title="Docker Fundamentals", Thumbnail="https://images.unsplash.com/photo-1605902711622-cfb43c44367e?q=80&w=600", Category="DevOps" },
        new Course { Id=5, Title="SQL Basics", Thumbnail="https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=600", Category="Database" },
        new Course { Id=6, Title="Azure Cloud", Thumbnail="https://images.unsplash.com/photo-1521791055366-0d553872125f?q=80&w=600", Category="Cloud" }
    };
}
